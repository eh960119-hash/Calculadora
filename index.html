<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Web Multisección</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración para usar la fuente Inter y un diseño moderno -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#1e293b',
                        'secondary-light': '#f0f9ff',
                        'accent-blue': '#3b82f6',
                        'accent-hover': '#2563eb',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilos personalizados para el fondo */
        body {
            background-color: #f8fafc; /* Color de fondo muy claro */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }

        /* Estilo para el contenedor principal de la calculadora */
        .calculator-container {
            width: 100%;
            max-width: 450px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Estilo base para los botones de operación en el menú */
        .menu-button {
            transition: all 0.3s ease;
            transform: scale(1);
        }

        .menu-button:hover {
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5), 0 4px 6px -2px rgba(59, 130, 246, 0.05);
            transform: scale(1.02);
        }
    </style>
</head>
<body class="p-4">

    <!-- Contenedor Principal de la Calculadora -->
    <div id="app" class="calculator-container bg-white rounded-xl overflow-hidden">
        <!-- El contenido se inyectará aquí por JavaScript -->
    </div>

    <script>
        // Variables globales
        let currentPage = 'menu';
        const app = document.getElementById('app');

        // --- LÓGICA DE NAVEGACIÓN Y RENDERIZADO ---

        /**
         * Muestra la página solicitada actualizando el contenido del contenedor 'app'.
         * @param {string} pageName - Nombre de la página a mostrar ('menu' o nombre de operación).
         */
        function showPage(pageName) {
            currentPage = pageName;
            let content = '';

            // Lógica de renderizado según la página
            switch (pageName) {
                case 'menu':
                    content = renderMenu();
                    break;
                case 'suma':
                case 'resta':
                case 'multiplicacion':
                case 'division':
                    content = renderOperationPage(pageName, 'Número 1', 'Número 2');
                    break;
                case 'potencia':
                    content = renderOperationPage(pageName, 'Base', 'Exponente');
                    break;
                default:
                    content = `<div class="p-6 text-center text-red-600">Página no encontrada.</div>`;
            }

            app.innerHTML = content;
            // Aseguramos que se adjunten los event listeners después de renderizar
            attachEventListeners(pageName);
        }

        /**
         * Genera el HTML para el Menú Principal.
         */
        function renderMenu() {
            return `
                <header class="p-6 bg-primary-dark text-white rounded-t-xl text-center">
                    <h1 class="text-3xl font-bold mb-1">Calculadora Web</h1>
                    <p class="text-sm opacity-80">Seleccione la operación a realizar:</p>
                </header>
                <div class="p-6 grid grid-cols-2 gap-4">
                    ${createMenuButton('Suma', 'suma', 'bg-green-500 hover:bg-green-600')}
                    ${createMenuButton('Resta', 'resta', 'bg-red-500 hover:bg-red-600')}
                    ${createMenuButton('Multiplicación', 'multiplicacion', 'bg-yellow-500 hover:bg-yellow-600')}
                    ${createMenuButton('División', 'division', 'bg-purple-500 hover:bg-purple-600')}
                    ${createMenuButton('Potencia', 'potencia', 'bg-indigo-500 hover:bg-indigo-600', 'col-span-2')}
                </div>
            `;
        }

        /**
         * Helper para crear un botón del menú.
         */
        function createMenuButton(label, page, colorClasses, colSpan = '') {
            return `
                <button
                    data-page="${page}"
                    class="menu-button ${colorClasses} text-white font-semibold py-4 rounded-lg shadow-lg ${colSpan}"
                >
                    ${label}
                </button>
            `;
        }

        /**
         * Genera el HTML para una página de operación (Suma, Resta, etc.).
         */
        function renderOperationPage(pageName, label1, label2) {
            const titleMap = {
                suma: 'Suma (Adición)',
                resta: 'Resta (Sustracción)',
                multiplicacion: 'Multiplicación',
                division: 'División',
                potencia: 'Potencia',
            };
            const title = titleMap[pageName] || pageName.toUpperCase();

            return `
                <header class="p-6 bg-accent-blue text-white text-center rounded-t-xl">
                    <h2 class="text-2xl font-bold">${title}</h2>
                </header>
                <div class="p-6 space-y-4">
                    <!-- Campo de entrada 1 -->
                    <div>
                        <label for="input1" class="block text-sm font-medium text-gray-700 mb-1">${label1}</label>
                        <input type="number" id="input1" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-accent-blue focus:border-accent-blue transition duration-150" placeholder="Ingrese el primer número" value="">
                    </div>

                    <!-- Campo de entrada 2 -->
                    <div>
                        <label for="input2" class="block text-sm font-medium text-gray-700 mb-1">${label2}</label>
                        <input type="number" id="input2" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-accent-blue focus:border-accent-blue transition duration-150" placeholder="Ingrese el segundo número" value="">
                    </div>

                    <!-- Botón de Calcular -->
                    <button id="calculate-btn" data-operation="${pageName}" class="w-full bg-accent-blue text-white font-semibold py-3 rounded-md shadow-lg hover:bg-accent-hover transition duration-300 transform hover:scale-[1.01]">
                        Calcular
                    </button>

                    <!-- Resultado -->
                    <div class="pt-4 border-t mt-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Resultado:</h3>
                        <div id="result-display" class="p-3 bg-secondary-light border border-gray-200 rounded-lg text-2xl font-mono text-primary-dark min-h-[44px] flex items-center justify-start">
                            --
                        </div>
                    </div>

                    <!-- Botón Volver al Menú -->
                    <button id="back-to-menu-btn" class="w-full text-center text-accent-blue hover:text-accent-hover py-2 transition duration-200 mt-4">
                        ← Volver al Menú
                    </button>
                </div>
            `;
        }

        // --- LÓGICA DE CÁLCULO ---

        /**
         * Ejecuta la operación matemática según el nombre de la página.
         * @param {string} operation - La operación a realizar.
         * @param {number} num1 - Primer número (o Base).
         * @param {number} num2 - Segundo número (o Exponente).
         * @returns {number|string} El resultado de la operación o un mensaje de error.
         */
        function performCalculation(operation, num1, num2) {
            const n1 = parseFloat(num1);
            const n2 = parseFloat(num2);

            if (isNaN(n1) || isNaN(n2)) {
                return "Error: Ingrese números válidos.";
            }

            let result;
            try {
                switch (operation) {
                    case 'suma':
                        result = n1 + n2;
                        break;
                    case 'resta':
                        result = n1 - n2;
                        break;
                    case 'multiplicacion':
                        result = n1 * n2;
                        break;
                    case 'division':
                        if (n2 === 0) {
                            return "Error: División por cero no permitida.";
                        }
                        result = n1 / n2;
                        break;
                    case 'potencia':
                        result = Math.pow(n1, n2);
                        break;
                    default:
                        return "Operación no reconocida.";
                }
                // Limitar la precisión de los decimales para resultados flotantes
                return (result % 1 !== 0) ? result.toFixed(4) : result;
            } catch (e) {
                console.error("Error de cálculo:", e);
                return "Error de cálculo interno.";
            }
        }

        // --- MANEJO DE EVENTOS ---

        /**
         * Adjunta los listeners de eventos a los elementos recién renderizados.
         * @param {string} pageName - La página actual para adjuntar eventos específicos.
         */
        function attachEventListeners(pageName) {
            // Eventos para la página de Menú
            if (pageName === 'menu') {
                document.querySelectorAll('.menu-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const targetPage = e.currentTarget.getAttribute('data-page');
                        showPage(targetPage);
                    });
                });
                return;
            }

            // Eventos para las páginas de Operación
            if (['suma', 'resta', 'multiplicacion', 'division', 'potencia'].includes(pageName)) {
                const calculateBtn = document.getElementById('calculate-btn');
                const backBtn = document.getElementById('back-to-menu-btn');
                const resultDisplay = document.getElementById('result-display');

                // Listener del botón CALCULAR
                calculateBtn.addEventListener('click', () => {
                    const input1 = document.getElementById('input1').value;
                    const input2 = document.getElementById('input2').value;
                    const operation = calculateBtn.getAttribute('data-operation');

                    const result = performCalculation(operation, input1, input2);
                    resultDisplay.textContent = result;

                    // Aplicar estilo de error si hay un mensaje de error
                    if (typeof result === 'string' && result.startsWith('Error')) {
                        resultDisplay.classList.remove('text-primary-dark');
                        resultDisplay.classList.add('text-red-600', 'font-semibold');
                    } else {
                        resultDisplay.classList.remove('text-red-600', 'font-semibold');
                        resultDisplay.classList.add('text-primary-dark');
                    }
                });

                // Listener del botón VOLVER AL MENÚ
                backBtn.addEventListener('click', () => {
                    showPage('menu');
                });
            }
        }

        // Inicializar la aplicación mostrando el menú
        document.addEventListener('DOMContentLoaded', () => {
            showPage('menu');
        });
    </script>

</body>
</html>
